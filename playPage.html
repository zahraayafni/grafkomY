<html>
	<head>
		<title>Play Beat.ly</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
			@font-face
			{
				font-family: NeonLights;
				src: url('font/neon2.ttf'); 
			}
		</style>
	</head>
	<body>
	<script src="lib/build/three.js"></script>
	<script src="https://unpkg.com/three.texttexture@18.10.24"></script>
	<script src="lib/js/loaders/FBXLoader.js"></script>
	<script src="lib/js/libs/inflate.min.js"></script>
	<script src="lib/THREE.TextSprite.js"></script>
	<script>
		var camera;
		var scene;
		var renderer;
		var object;

		function init()
		{
			//Scene
			scene = new THREE.Scene();

			//Camera
			camera = new THREE.PerspectiveCamera(35, window.innerWidth/window.innerHeight, 0.1, 3000);

			//Renderer
			renderer = new THREE.WebGLRenderer({antialias: true});

			renderer.setClearColor(0x000000);
			renderer.setSize( window.innerWidth, window.innerHeight );
			document.body.appendChild( renderer.domElement );

			var loader = new THREE.FBXLoader();
			loader.load('obj/bluePlate.fbx', function(obj) {
				object = obj;
				object.scale.x = object.scale.y = object.scale.z = 0.3;
				object.position.set(0,0,-800);
				console.log(object);
                scene.add(object);
            });


            var sprite = new THREE.TextSprite({
				textSize: 12,
				material: {
					color: 0x8cb8ff,
				},
				texture: {
					text: 'Beat.ly',
					fontFamily: 'NeonLights, Helvetica, sans-serif',
				},
			});
			//sprite.position.set(-window.innerWidth/2.5, window.innerHeight/2.5, 0);
			sprite.position.set(-window.innerWidth/12, window.innerHeight/12, 0);
			console.log(sprite.position);
			scene.add(sprite);

			//SET CAMERA POSITION
			camera.position.set(0, 0, 200);
			camera.lookAt(scene.position);

			//LIGHTING
			var ambientLight = new THREE.AmbientLight(0x111111);
        	scene.add(ambientLight);

        	// add pointLight for the shadows
        	var pointLight = new THREE.PointLight(0xffffff,1,0,0.55 * Math.PI);
        	pointLight.position.set(0, 15, 0);
        	pointLight.castShadow = true;

        	pointLight.shadow.mapSize.width = 1024 ;
        	pointLight.shadow.mapSize.height = 1024 ;

        	scene.add(pointLight);

			render();
		}

		function render()
		{
			requestAnimationFrame( render );
			if (object != undefined) {
				object.position.z += 1;
			}
			renderer.render( scene, camera );
		}

		function onResize() {
        	camera.aspect = window.innerWidth / window.innerHeight;
        	camera.updateProjectionMatrix();
        	renderer.setSize(window.innerWidth, window.innerHeight);
    	}

    	//Listen to keyboard event
    	window.onkeydown = function(event) {
    		var input = event.key;
    		var range = 10;
    		switch(input) {
        		case 'a': 
            		object.position.x -= range;
            		break;
        		case 's':
            		object.position.y -= range;
            		break;
        		case 'k':
            		object.position.y += range;
            		break;
        		case 'l':
            		object.position.x += range;
            		break;
    		}
		}

    	window.onload = init;
    	// listen to the resize events
    	window.addEventListener('resize', onResize, false);
		
		</script>
	</body>
</html>